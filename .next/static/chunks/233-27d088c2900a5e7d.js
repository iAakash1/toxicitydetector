(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{2775:(e,t,s)=>{"use strict";s.d(t,{E:()=>y});var r=s(2020),n=s(9853),i=s(7165),a=s(5910),o=class extends a.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let i=t.queryKey,a=t.queryHash??(0,r.F$)(i,t),o=this.get(a);return o||(o=new n.X({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){i.jG.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,r.MK)(e,t)):t}notify(e){i.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){i.jG.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){i.jG.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=s(4560),u=class extends a.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#s=new Map,this.#r=0}#t;#s;#r;build(e,t,s){let r=new l.s({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#t.add(e);let t=c(e);if("string"==typeof t){let s=this.#s.get(t);s?s.push(e):this.#s.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=c(e);if("string"==typeof t){let s=this.#s.get(t);if(s)if(s.length>1){let t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#s.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=c(e);if("string"!=typeof t)return!0;{let s=this.#s.get(t),r=s?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=c(e);if("string"!=typeof t)return Promise.resolve();{let s=this.#s.get(t)?.find(t=>t!==e&&t.state.isPaused);return s?.continue()??Promise.resolve()}}clear(){i.jG.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#s.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,r.nJ)(e,t))}notify(e){i.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return i.jG.batch(()=>Promise.all(e.map(e=>e.continue().catch(r.lQ))))}};function c(e){return e.options.scope?.id}var h=s(920),f=s(1239),d=s(4275),y=class{#n;#i;#a;#o;#l;#u;#c;#h;constructor(e={}){this.#n=e.queryCache||new o,this.#i=e.mutationCache||new u,this.#a=e.defaultOptions||{},this.#o=new Map,this.#l=new Map,this.#u=0}mount(){this.#u++,1===this.#u&&(this.#c=h.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#n.onFocus())}),this.#h=f.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#n.onOnline())}))}unmount(){this.#u--,0===this.#u&&(this.#c?.(),this.#c=void 0,this.#h?.(),this.#h=void 0)}isFetching(e){return this.#n.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#n.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),s=this.#n.build(this,t),n=s.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,r.d2)(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#n.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){let n=this.defaultQueryOptions({queryKey:e}),i=this.#n.get(n.queryHash),a=i?.state.data,o=(0,r.Zw)(t,a);if(void 0!==o)return this.#n.build(this,n).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return i.jG.batch(()=>this.#n.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#n.get(t.queryHash)?.state}removeQueries(e){let t=this.#n;i.jG.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let s=this.#n;return i.jG.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let s={revert:!0,...t};return Promise.all(i.jG.batch(()=>this.#n.findAll(e).map(e=>e.cancel(s)))).then(r.lQ).catch(r.lQ)}invalidateQueries(e,t={}){return i.jG.batch(()=>(this.#n.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let s={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(i.jG.batch(()=>this.#n.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(r.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let s=this.#n.build(this,t);return s.isStaleByTime((0,r.d2)(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r.lQ).catch(r.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,d.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r.lQ).catch(r.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,d.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return f.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#n}getMutationCache(){return this.#i}getDefaultOptions(){return this.#a}setDefaultOptions(e){this.#a=e}setQueryDefaults(e,t){this.#o.set((0,r.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],s={};return t.forEach(t=>{(0,r.Cp)(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){this.#l.set((0,r.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],s={};return t.forEach(t=>{(0,r.Cp)(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,r.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===r.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#a.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#n.clear(),this.#i.clear()}}},6320:(e,t,s)=>{"use strict";s.d(t,{CP:()=>ei});var r,n,i,a,o,l=s(5155),u=s(2115),c=s.t(u,2);class h extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class f extends h{}f.kind="signIn";class d extends h{}d.type="AdapterError";class y extends h{}y.type="AccessDenied";class p extends h{}p.type="CallbackRouteError";class g extends h{}g.type="ErrorPageLoop";class m extends h{}m.type="EventError";class b extends h{}b.type="InvalidCallbackUrl";class v extends f{constructor(){super(...arguments),this.code="credentials"}}v.type="CredentialsSignin";class w extends h{}w.type="InvalidEndpoints";class E extends h{}E.type="InvalidCheck";class O extends h{}O.type="JWTSessionError";class A extends h{}A.type="MissingAdapter";class C extends h{}C.type="MissingAdapterMethods";class S extends h{}S.type="MissingAuthorize";class k extends h{}k.type="MissingSecret";class I extends f{}I.type="OAuthAccountNotLinked";class x extends f{}x.type="OAuthCallbackError";class _ extends h{}_.type="OAuthProfileParseError";class P extends h{}P.type="SessionTokenError";class q extends f{}q.type="OAuthSignInError";class T extends f{}T.type="EmailSignInError";class Q extends h{}Q.type="SignOutError";class j extends h{}j.type="UnknownAction";class R extends h{}R.type="UnsupportedStrategy";class M extends h{}M.type="InvalidProvider";class N extends h{}N.type="UntrustedHost";class D extends h{}D.type="Verification";class L extends f{}L.type="MissingCSRF";class U extends h{}U.type="DuplicateConditionalUI";class V extends h{}V.type="MissingWebAuthnAutocomplete";class z extends h{}z.type="WebAuthnVerificationError";class F extends f{}F.type="AccountNotLinked";class H extends h{}H.type="ExperimentalFeatureNotEnabled";class B extends h{}class K extends h{}async function G(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n="".concat(t.basePath,"/").concat(e);try{var i;let e={headers:{"Content-Type":"application/json",...(null==r||null==(i=r.headers)?void 0:i.cookie)?{cookie:r.headers.cookie}:{}}};(null==r?void 0:r.body)&&(e.body=JSON.stringify(r.body),e.method="POST");let t=await fetch(n,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new B(e.message,e)),null}}function $(){return Math.floor(Date.now()/1e3)}function X(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let s=new URL(e||t),r=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),n="".concat(s.origin).concat(r);return{origin:s.origin,host:s.host,path:r,base:n,toString:()=>n}}var J=s(9509);let W={baseUrl:X(null!=(n=J.env.NEXTAUTH_URL)?n:J.env.VERCEL_URL).origin,basePath:X(J.env.NEXTAUTH_URL).path,baseUrlServer:X(null!=(a=null!=(i=J.env.NEXTAUTH_URL_INTERNAL)?i:J.env.NEXTAUTH_URL)?a:J.env.VERCEL_URL).origin,basePathServer:X(null!=(o=J.env.NEXTAUTH_URL_INTERNAL)?o:J.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},Z=null;function Y(){return new BroadcastChannel("next-auth")}function ee(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}:(null===Z&&(Z=Y()),Z)}let et={debug:console.debug,error:console.error,warn:console.warn},es=null==(r=u.createContext)?void 0:r.call(c,void 0);async function er(e){var t;let s=await G("session",W,et,e);return(null==(t=null==e?void 0:e.broadcast)||t)&&Y().postMessage({event:"session",data:{trigger:"getSession"}}),s}async function en(){var e;let t=await G("csrf",W,et);return null!=(e=null==t?void 0:t.csrfToken)?e:""}function ei(e){if(!es)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:s,refetchInterval:r,refetchWhenOffline:n}=e;s&&(W.basePath=s);let i=void 0!==e.session;W._lastSync=i?$():0;let[a,o]=u.useState(()=>(i&&(W._session=e.session),e.session)),[c,h]=u.useState(!i);u.useEffect(()=>(W._getSession=async function(){let{event:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t="storage"===e;if(t||void 0===W._session){W._lastSync=$(),W._session=await er({broadcast:!t}),o(W._session);return}if(!e||null===W._session||$()<W._lastSync)return;W._lastSync=$(),W._session=await er(),o(W._session)}catch(e){et.error(new K(e.message,e))}finally{h(!1)}},W._getSession(),()=>{W._lastSync=0,W._session=void 0,W._getSession=()=>{}}),[]),u.useEffect(()=>{let e=()=>W._getSession({event:"storage"});return ee().addEventListener("message",e),()=>ee().removeEventListener("message",e)},[]),u.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,s=()=>{t&&"visible"===document.visibilityState&&W._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",s,!1),()=>document.removeEventListener("visibilitychange",s,!1)},[e.refetchOnWindowFocus]);let f=function(){let[e,t]=u.useState("undefined"!=typeof navigator&&navigator.onLine),s=()=>t(!0),r=()=>t(!1);return u.useEffect(()=>(window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}),[]),e}(),d=!1!==n||f;u.useEffect(()=>{if(r&&d){let e=setInterval(()=>{W._session&&W._getSession({event:"poll"})},1e3*r);return()=>clearInterval(e)}},[r,d]);let y=u.useMemo(()=>({data:a,status:c?"loading":a?"authenticated":"unauthenticated",async update(e){if(c)return;h(!0);let t=await G("session",W,et,void 0===e?void 0:{body:{csrfToken:await en(),data:e}});return h(!1),t&&(o(t),ee().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[a,c]);return(0,l.jsx)(es.Provider,{value:y,children:t})}},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},9177:(e,t,s)=>{"use strict";var r,n;s.d(t,{Ay:()=>V});class i{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class a{constructor(e){this.generateIdentifier=e,this.kv=new i}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class o extends a{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function l(e,t){Object.entries(e).forEach(([e,s])=>t(s,e))}function u(e,t){return -1!==e.indexOf(t)}function c(e,t){for(let s=0;s<e.length;s++){let r=e[s];if(t(r))return r}}class h{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,t){let s=function(e){if("values"in Object)return Object.values(e);let t=[];for(let s in e)e.hasOwnProperty(s)&&t.push(e[s]);return t}(e);if("find"in s)return s.find(t);for(let e=0;e<s.length;e++){let r=s[e];if(t(r))return r}}(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}}let f=e=>void 0===e,d=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),y=e=>d(e)&&0===Object.keys(e).length,p=e=>Array.isArray(e),g=e=>e instanceof Map,m=e=>e instanceof Set,b=e=>"Symbol"===Object.prototype.toString.call(e).slice(8,-1),v=e=>"number"==typeof e&&isNaN(e),w=e=>e.replace(/\./g,"\\."),E=e=>e.map(String).map(w).join("."),O=e=>{let t=[],s="";for(let r=0;r<e.length;r++){let n=e.charAt(r);if("\\"===n&&"."===e.charAt(r+1)){s+=".",r++;continue}if("."===n){t.push(s),s="";continue}s+=n}let r=s;return t.push(r),t};function A(e,t,s,r){return{isApplicable:e,annotation:t,transform:s,untransform:r}}let C=[A(f,"undefined",()=>null,()=>void 0),A(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),A(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),A(e=>e instanceof Error,"Error",(e,t)=>{let s={name:e.name,message:e.message};return t.allowedErrorProps.forEach(t=>{s[t]=e[t]}),s},(e,t)=>{let s=Error(e.message);return s.name=e.name,s.stack=e.stack,t.allowedErrorProps.forEach(t=>{s[t]=e[t]}),s}),A(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),A(m,"set",e=>[...e.values()],e=>new Set(e)),A(g,"map",e=>[...e.entries()],e=>new Map(e)),A(e=>v(e)||(e=>e===1/0||e===-1/0)(e),"number",e=>v(e)?"NaN":e>0?"Infinity":"-Infinity",Number),A(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),A(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function S(e,t,s,r){return{isApplicable:e,annotation:t,transform:s,untransform:r}}let k=S((e,t)=>!!b(e)&&!!t.symbolRegistry.getIdentifier(e),(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,s)=>{let r=s.symbolRegistry.getValue(t[1]);if(!r)throw Error("Trying to deserialize unknown symbol");return r}),I=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),x=S(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{let s=I[t[1]];if(!s)throw Error("Trying to deserialize unknown typed array");return new s(e)});function _(e,t){return!!e?.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}let P=S(_,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{let s=t.classRegistry.getAllowedProps(e.constructor);if(!s)return{...e};let r={};return s.forEach(t=>{r[t]=e[t]}),r},(e,t,s)=>{let r=s.classRegistry.getValue(t[1]);if(!r)throw Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(r.prototype),e)}),q=S((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,s)=>{let r=s.customTransformerRegistry.findByName(t[1]);if(!r)throw Error("Trying to deserialize unknown custom value");return r.deserialize(e)}),T=[P,k,q,x],Q=(e,t)=>{let s=c(T,s=>s.isApplicable(e,t));if(s)return{value:s.transform(e,t),type:s.annotation(e,t)};let r=c(C,s=>s.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation}},j={};C.forEach(e=>{j[e.annotation]=e});let R=(e,t)=>{if(t>e.size)throw Error("index out of bounds");let s=e.keys();for(;t>0;)s.next(),t--;return s.next().value};function M(e){if(u(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(u(e,"prototype"))throw Error("prototype is not allowed as a property");if(u(e,"constructor"))throw Error("constructor is not allowed as a property")}let N=(e,t,s)=>{if(M(t),0===t.length)return s(e);let r=e;for(let e=0;e<t.length-1;e++){let s=t[e];if(p(r))r=r[+s];else if(d(r))r=r[s];else if(m(r))r=R(r,+s);else if(g(r)){if(e===t.length-2)break;let n=+s,i=0==+t[++e]?"key":"value",a=R(r,n);switch(i){case"key":r=a;break;case"value":r=r.get(a)}}}let n=t[t.length-1];if(p(r)?r[+n]=s(r[+n]):d(r)&&(r[n]=s(r[n])),m(r)){let e=R(r,+n),t=s(e);e!==t&&(r.delete(e),r.add(t))}if(g(r)){let e=R(r,+t[t.length-2]);switch(0==+n?"key":"value"){case"key":{let t=s(e);r.set(t,r.get(e)),t!==e&&r.delete(e);break}case"value":r.set(e,s(r.get(e)))}}return e},D=(e,t,s,r,n=[],i=[],a=new Map)=>{let o=(e=>"boolean"==typeof e||null===e||f(e)||(e=>"number"==typeof e&&!isNaN(e))(e)||"string"==typeof e||b(e))(e);if(!o){!function(e,t,s){let r=s.get(e);r?r.push(t):s.set(e,[t])}(e,n,t);let s=a.get(e);if(s)return r?{transformedValue:null}:s}if(!((e,t)=>d(e)||p(e)||g(e)||m(e)||_(e,t))(e,s)){let t=Q(e,s),r=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return o||a.set(e,r),r}if(u(i,e))return{transformedValue:null};let c=Q(e,s),h=c?.value??e,v=p(h)?[]:{},E={};l(h,(o,u)=>{if("__proto__"===u||"constructor"===u||"prototype"===u)throw Error(`Detected property ${u}. This is a prototype pollution risk, please remove it from your object.`);let c=D(o,t,s,r,[...n,u],[...i,e],a);v[u]=c.transformedValue,p(c.annotations)?E[u]=c.annotations:d(c.annotations)&&l(c.annotations,(e,t)=>{E[w(u)+"."+t]=e})});let O=y(E)?{transformedValue:v,annotations:c?[c.type]:void 0}:{transformedValue:v,annotations:c?[c.type,E]:E};return o||a.set(e,O),O};function L(e){return Object.prototype.toString.call(e).slice(8,-1)}function U(e){return"Array"===L(e)}r=function(e){return"Null"===L(e)},n=function(e){return"Undefined"===L(e)};class V{constructor({dedupe:e=!1}={}){this.classRegistry=new o,this.symbolRegistry=new a(e=>e.description??""),this.customTransformerRegistry=new h,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let t=new Map,s=D(e,t,this,this.dedupe),r={json:s.transformedValue};s.annotations&&(r.meta={...r.meta,values:s.annotations});let n=function(e,t){let s,r={};return(e.forEach(e=>{if(e.length<=1)return;t||(e=e.map(e=>e.map(String)).sort((e,t)=>e.length-t.length));let[n,...i]=e;0===n.length?s=i.map(E):r[E(n)]=i.map(E)}),s)?y(r)?[s]:[s,r]:y(r)?void 0:r}(t,this.dedupe);return n&&(r.meta={...r.meta,referentialEqualities:n}),r}deserialize(e){var t,s,r;let{json:n,meta:i}=e,a=function e(t,s={}){return U(t)?t.map(t=>e(t,s)):!function(e){if("Object"!==L(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t)?t:[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((r,n)=>{if(U(s.props)&&!s.props.includes(n))return r;let i=e(t[n],s);var a=s.nonenumerable;let o=({}).propertyIsEnumerable.call(t,n)?"enumerable":"nonenumerable";return"enumerable"===o&&(r[n]=i),a&&"nonenumerable"===o&&Object.defineProperty(r,n,{value:i,enumerable:!1,writable:!0,configurable:!0}),r},{})}(n);return i?.values&&(t=a,s=i.values,r=this,function e(t,s,r=[]){if(!t)return;if(!p(t))return void l(t,(t,n)=>e(t,s,[...r,...O(n)]));let[n,i]=t;i&&l(i,(t,n)=>{e(t,s,[...r,...O(n)])}),s(n,r)}(s,(e,s)=>{t=N(t,s,t=>((e,t,s)=>{if(p(t))switch(t[0]){case"symbol":return k.untransform(e,t,s);case"class":return P.untransform(e,t,s);case"custom":return q.untransform(e,t,s);case"typed-array":return x.untransform(e,t,s);default:throw Error("Unknown transformation: "+t)}{let r=j[t];if(!r)throw Error("Unknown transformation: "+t);return r.untransform(e,s)}})(t,e,r))}),a=t),i?.referentialEqualities&&(a=function(e,t){function s(t,s){let r=((e,t)=>{M(t);for(let s=0;s<t.length;s++){let r=t[s];if(m(e))e=R(e,+r);else if(g(e)){let n=+r,i=0==+t[++s]?"key":"value",a=R(e,n);switch(i){case"key":e=a;break;case"value":e=e.get(a)}}else e=e[r]}return e})(e,O(s));t.map(O).forEach(t=>{e=N(e,t,()=>r)})}if(p(t)){let[r,n]=t;r.forEach(t=>{e=N(e,O(t),()=>e)}),n&&l(n,s)}else l(t,s);return e}(a,i.referentialEqualities)),a}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}V.defaultInstance=new V,V.serialize=V.defaultInstance.serialize.bind(V.defaultInstance),V.deserialize=V.defaultInstance.deserialize.bind(V.defaultInstance),V.stringify=V.defaultInstance.stringify.bind(V.defaultInstance),V.parse=V.defaultInstance.parse.bind(V.defaultInstance),V.registerClass=V.defaultInstance.registerClass.bind(V.defaultInstance),V.registerSymbol=V.defaultInstance.registerSymbol.bind(V.defaultInstance),V.registerCustom=V.defaultInstance.registerCustom.bind(V.defaultInstance),V.allowErrorProps=V.defaultInstance.allowErrorProps.bind(V.defaultInstance),V.serialize,V.deserialize,V.stringify,V.parse,V.registerClass,V.registerCustom,V.registerSymbol,V.allowErrorProps}}]);